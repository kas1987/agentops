# ao CLI Reference

> Auto-generated by `scripts/generate-cli-reference.sh` on 2026-02-10.
> Do not edit manually. Re-run the script to update.

## Global Flags

          --config string   Config file (default: ~/.agentops/config.yaml)
          --dry-run         Show what would happen without executing
      -h, --help            help for ao
      -o, --output string   Output format (json, table, yaml) (default "table")
      -v, --verbose         Enable verbose output

---

## Commands

### `ao anti-patterns`

List learnings that have been marked as anti-patterns.

```
ao anti-patterns [flags]
```

---

### `ao badge`

Display a visual badge showing knowledge flywheel health status.

```
ao badge [flags]
```

---

### `ao batch-feedback`

Process feedback loop for all sessions that have citations but no feedback.

```
ao batch-feedback [flags]
```

**Flags:**

```
      --days int   Process sessions from the last N days (default 7)
  -h, --help       help for batch-feedback
```

---

### `ao completion`

Generate shell completion scripts for ao.

```
ao completion [bash|zsh|fish]
```

---

### `ao config`

View and manage AgentOps configuration.

```
ao config [flags]
```

**Flags:**

```
  -h, --help   help for config
      --show   Show resolved configuration with sources
```

---

### `ao demo`

Run an interactive demonstration of AgentOps capabilities.

```
ao demo [flags]
```

**Flags:**

```
      --concepts   Just explain core concepts
  -h, --help       help for demo
      --quick      2-minute quick overview
```

---

### `ao extract`

Check for pending session extractions and output a prompt for Claude to process.

```
ao extract [flags]
```

**Flags:**

```
      --all               Process all pending entries
      --clear             Clear pending queue without processing
  -h, --help              help for extract
      --max-content int   Maximum characters of session content to include (default 3000)
```

---

### `ao feedback`

Record reward feedback for a learning to update its utility value.

```
ao feedback <learning-id> [flags]
```

**Flags:**

```
      --alpha float    EMA learning rate (default 0.1)
      --harmful        Mark as harmful (shortcut for --reward 0.0)
  -h, --help           help for feedback
      --helpful        Mark as helpful (shortcut for --reward 1.0)
      --reward float   Reward value (0.0 to 1.0) (default -1)
```

---

### `ao feedback-loop`

Automatically close the MemRL feedback loop by updating utilities of cited learnings.

```
ao feedback-loop [flags]
```

**Flags:**

```
      --alpha float            EMA learning rate (default 0.1)
      --citation-type string   Filter citations by type (retrieved, applied, all) (default "retrieved")
  -h, --help                   help for feedback-loop
      --reward float           Override reward value (0.0-1.0); -1 = compute from transcript (default -1)
      --session string         Session ID to process
      --transcript string      Path to transcript for reward computation
```

---

### `ao flywheel`

Knowledge flywheel operations and status.

```
ao flywheel [command]
```

**Subcommands:**

#### `ao flywheel nudge`

Returns structured JSON combining:

```
ao flywheel nudge [flags]
```

#### `ao flywheel status`

Display comprehensive flywheel health status.

```
ao flywheel status [flags]
```

**Flags:**

```
      --days int   Period in days for metrics calculation (default 7)
  -h, --help       help for status
```

---

### `ao forge`

The forge command extracts knowledge candidates from various sources.

```
ao forge [command]
```

**Subcommands:**

#### `ao forge batch`

Find and process pending transcripts in bulk.

```
ao forge batch [flags]
```

**Flags:**

```
      --dir string   Specific directory to scan (default: all Claude project dirs)
      --extract      Trigger extraction after forging
  -h, --help         help for batch
      --max int      Maximum transcripts to process (0 = all)
```

#### `ao forge transcript`

Parse Claude Code JSONL transcript files and extract knowledge candidates.

```
ao forge transcript <path-or-glob> [flags]
```

**Flags:**

```
  -h, --help           help for transcript
      --last-session   Process only the most recent transcript
      --queue          Queue session for learning extraction at next session start
      --quiet          Suppress all output (for hooks)
```

---

### `ao gate`

Manage human review gates for bronze-tier candidates.

```
ao gate [command]
```

**Subcommands:**

#### `ao gate approve`

Approve a bronze-tier candidate for promotion.

```
ao gate approve <candidate-id> [flags]
```

**Flags:**

```
  -h, --help          help for approve
      --note string   Optional approval note
```

#### `ao gate bulk-approve`

Approve all silver-tier candidates older than a threshold.

```
ao gate bulk-approve [flags]
```

**Flags:**

```
  -h, --help                help for bulk-approve
      --older-than string   Age threshold for bulk approval (default "24h")
      --tier string         Tier to bulk approve (default: silver) (default "silver")
```

#### `ao gate pending`

List bronze-tier candidates awaiting human review.

```
ao gate pending [flags]
```

#### `ao gate reject`

Reject a candidate with a required reason.

```
ao gate reject <candidate-id> [flags]
```

**Flags:**

```
  -h, --help            help for reject
      --reason string   Required rejection reason
```

---

### `ao help`

Help provides help for any command in the application.

```
ao help [command] [flags]
```

---

### `ao hooks`

The hooks command manages Claude Code hooks that automate the CASS knowledge flywheel.

```
ao hooks [command]
```

**Subcommands:**

#### `ao hooks init`

Generate Claude Code hooks configuration for the CASS knowledge flywheel.

```
ao hooks init [flags]
```

**Flags:**

```
      --format string   Output format: json, shell (default "json")
  -h, --help            help for init
```

#### `ao hooks install`

Install ao hooks to ~/.claude/settings.json.

```
ao hooks install [flags]
```

**Flags:**

```
      --dry-run   Show what would be installed without making changes
      --force     Overwrite existing ao hooks
  -h, --help      help for install
```

#### `ao hooks show`

Display the current Claude Code hooks configuration from ~/.claude/settings.json.

```
ao hooks show [flags]
```

#### `ao hooks test`

Test that all hook dependencies are available and working.

```
ao hooks test [flags]
```

**Flags:**

```
      --dry-run   Show test steps without running hooks
  -h, --help      help for test
```

---

### `ao inbox`

View messages from the Agent Farm.

```
ao inbox [flags]
```

**Flags:**

```
      --from string    Filter by sender
  -h, --help           help for inbox
      --limit int      Maximum messages to display (0 for all) (default 100)
      --mark-read      Mark displayed messages as read
      --since string   Show messages from last duration (e.g., 5m, 1h)
      --unread         Show only unread messages
```

---

### `ao init`

Create the .agents/ao directory structure for knowledge storage.

```
ao init [flags]
```

---

### `ao inject`

Inject searches and outputs relevant knowledge for session startup.

```
ao inject [context] [flags]
```

**Flags:**

```
      --apply-decay      Apply confidence decay before ranking
      --context string   Context query for filtering (alternative to positional arg)
      --format string    Output format: markdown, json (default "markdown")
  -h, --help             help for inject
      --max-tokens int   Maximum tokens to output (default 1500)
      --no-cite          Disable citation recording
      --session string   Session ID for citation tracking (auto-generated if empty)
```

---

### `ao mail`

Inter-agent messaging for the Agent Farm.

```
ao mail [command]
```

**Subcommands:**

#### `ao mail send`

Send a message to another agent or the mayor.

```
ao mail send [flags]
```

**Flags:**

```
      --body string   Message body
  -h, --help          help for send
      --to string     Recipient (mayor, witness, agent-N)
      --type string   Message type (progress, completion, blocker, farm_complete) (default "progress")
```

---

### `ao maturity`

Check and manage CASS (Contextual Agent Session Search) maturity levels.

```
ao maturity [learning-id] [flags]
```

**Flags:**

```
      --apply   Apply maturity transitions
  -h, --help    help for maturity
      --scan    Scan all learnings for pending transitions
```

---

### `ao metrics`

Track and report on knowledge flywheel metrics.

```
ao metrics [command]
```

**Subcommands:**

#### `ao metrics baseline`

Capture a baseline snapshot of the knowledge flywheel.

```
ao metrics baseline [flags]
```

**Flags:**

```
      --days int   Period in days for metrics calculation (default 7)
  -h, --help       help for baseline
```

#### `ao metrics cite`

Record that an artifact was cited in this session.

```
ao metrics cite <artifact-path> [flags]
```

**Flags:**

```
  -h, --help             help for cite
      --query string     Search query that surfaced this artifact
      --session string   Session ID (auto-detected if not provided)
      --type string      Citation type: recall, reference, applied (default "reference")
```

#### `ao metrics report`

Display a formatted report of knowledge flywheel metrics.

```
ao metrics report [flags]
```

**Flags:**

```
      --days int   Period in days for metrics calculation (default 7)
  -h, --help       help for report
```

---

### `ao migrate`

Migrate existing learnings to include MemRL utility field.

```
ao migrate memrl [flags]
```

---

### `ao plans`

Plans manages the plan manifest at .agents/plans/manifest.jsonl.

```
ao plans [command]
```

**Subcommands:**

#### `ao plans diff`

Diff compares the plan manifest against beads reality.

```
ao plans diff [flags]
```

#### `ao plans list`

List shows all plans in the manifest.

```
ao plans list [flags]
```

**Flags:**

```
  -h, --help             help for list
      --project string   Filter by project path
      --status string    Filter by status (active, completed, abandoned, superseded)
```

#### `ao plans register`

Register adds a plan to the manifest.jsonl for discovery.

```
ao plans register <plan-path> [flags]
```

**Flags:**

```
      --beads-id string   Beads issue/epic ID this plan implements
  -h, --help              help for register
      --name string       Human-readable plan name
      --project string    Project path this plan applies to
```

#### `ao plans search`

Search plans by name or project

```
ao plans search <query> [flags]
```

#### `ao plans sync`

Sync pulls plan metadata from beads to prevent drift.

```
ao plans sync [flags]
```

#### `ao plans update`

Update a plan's status or metadata

```
ao plans update <plan-path> [flags]
```

**Flags:**

```
      --beads-id string   Update beads ID
  -h, --help              help for update
      --status string     New status for the plan
```

---

### `ao pool`

Manage knowledge candidates in quality pools.

```
ao pool [command]
```

**Subcommands:**

#### `ao pool auto-promote`

Automatically approve silver-tier candidates that have been pending

```
ao pool auto-promote [flags]
```

**Flags:**

```
  -h, --help               help for auto-promote
      --threshold string   Minimum age for auto-promotion (e.g., 24h)
```

#### `ao pool batch-promote`

Promote pending pool candidates that meet promotion criteria.

```
ao pool batch-promote [flags]
```

**Flags:**

```
  --dry-run   Show what would be promoted without executing
  --force     Promote all pending candidates regardless of criteria
  --min-age   Minimum age threshold (default: 24h)
      --force            Promote all pending regardless of criteria
  -h, --help             help for batch-promote
      --min-age string   Minimum age for promotion eligibility (default "24h")
```

#### `ao pool list`

List knowledge candidates filtered by tier and/or status.

```
ao pool list [flags]
```

**Flags:**

```
  -h, --help            help for list
      --limit int       Limit number of results
      --status string   Filter by status (pending, staged, promoted, rejected)
      --tier string     Filter by tier (gold, silver, bronze)
```

#### `ao pool promote`

Move a staged candidate to the knowledge base (.agents/learnings/ or .agents/patterns/).

```
ao pool promote <candidate-id> [flags]
```

#### `ao pool reject`

Mark a candidate as rejected and move to rejected directory.

```
ao pool reject <candidate-id> [flags]
```

**Flags:**

```
  -h, --help            help for reject
      --reason string   Reason for rejection (required)
```

#### `ao pool show`

Show candidate details

```
ao pool show <candidate-id> [flags]
```

#### `ao pool stage`

Move a candidate from pending to staged status.

```
ao pool stage <candidate-id> [flags]
```

**Flags:**

```
  -h, --help              help for stage
      --min-tier string   Minimum tier threshold (default: bronze)
```

---

### `ao promote-anti-patterns`

Scan learnings and promote those meeting anti-pattern criteria.

```
ao promote-anti-patterns [flags]
```

---

### `ao quick-start`

Initialize AgentOps in your current project.

```
ao quick-start [flags]
```

**Flags:**

```
  -h, --help       help for quick-start
      --minimal    Minimal setup (just directories)
      --no-beads   Skip beads initialization
```

---

### `ao ratchet`

Track progress through the RPI (Research-Plan-Implement) workflow.

```
ao ratchet [command]
```

**Subcommands:**

#### `ao ratchet check`

Check if prerequisites are satisfied for a workflow step.

```
ao ratchet check <step> [flags]
```

#### `ao ratchet find`

Search for artifacts across all locations.

```
ao ratchet find <pattern> [flags]
```

#### `ao ratchet migrate`

Migrate chain from legacy YAML format to JSONL.

```
ao ratchet migrate [flags]
```

#### `ao ratchet migrate-artifacts`

Add schema_version: 1 to existing .agents/ artifacts.

```
ao ratchet migrate-artifacts [path] [flags]
```

#### `ao ratchet next`

Show the next pending step in the RPI workflow.

```
ao ratchet next [flags]
```

**Flags:**

```
      --epic string   Filter by epic ID
  -h, --help          help for next
```

#### `ao ratchet promote`

Record promotion of an artifact to a higher tier.

```
ao ratchet promote <artifact> [flags]
```

**Flags:**

```
  -h, --help     help for promote
      --to int   Target tier (0-4, required) (default -1)
```

#### `ao ratchet record`

Record that a workflow step has been completed.

```
ao ratchet record <step> [flags]
```

**Flags:**

```
  -h, --help            help for record
      --input string    Input artifact path
      --lock            Lock the step (engage ratchet) (default true)
      --output string   Output artifact path (required)
      --tier int        Quality tier (0-4) (default -1)
```

#### `ao ratchet skip`

Record that a step was intentionally skipped.

```
ao ratchet skip <step> [flags]
```

**Flags:**

```
  -h, --help            help for skip
      --reason string   Reason for skipping (required)
```

#### `ao ratchet spec`

Find and output the current spec artifact path.

```
ao ratchet spec [flags]
```

#### `ao ratchet status`

Display the current state of the ratchet chain.

```
ao ratchet status [flags]
```

**Flags:**

```
      --chain string   Filter by chain ID
      --epic string    Filter by epic ID
  -h, --help           help for status
```

#### `ao ratchet trace`

Trace an artifact back through the ratchet chain.

```
ao ratchet trace <artifact> [flags]
```

#### `ao ratchet validate`

Validate that an artifact meets quality requirements.

```
ao ratchet validate <step> [flags]
```

**Flags:**

```
      --changes strings      Files to validate
  -h, --help                 help for validate
      --lenient              Allow legacy artifacts without schema_version (expires in 90 days)
      --lenient-expiry int   Days until lenient bypass expires (default 90)
```

---

### `ao search`

Search AgentOps knowledge using file-based search.

```
ao search <query> [flags]
```

**Flags:**

```
      --cass          Enable CASS session-aware search with maturity weighting
  -h, --help          help for search
      --limit int     Maximum results to return (default 10)
      --type string   Filter by type: decisions, knowledge, sessions
      --use-sc        Enable Smart Connections semantic search (requires Obsidian)
```

---

### `ao session`

Session lifecycle operations.

```
ao session [command]
```

**Subcommands:**

#### `ao session close`

Close a session by forging its transcript, extracting learnings,

```
ao session close [flags]
```

**Flags:**

```
  -h, --help             help for close
      --session string   Session ID to close (default: most recent transcript)
```

---

### `ao session-outcome`

Parse a Claude Code session transcript and derive a composite reward signal.

```
ao session-outcome [transcript-path] [flags]
```

**Flags:**

```
  -h, --help             help for session-outcome
      --output string    Output format: text, json (default "text")
      --session string   Session ID (extracted from transcript if not provided)
```

---

### `ao status`

Display the current state of AgentOps knowledge base.

```
ao status [flags]
```

---

### `ao store`

The STORE phase indexes artifacts for retrieval and search.

```
ao store [command]
```

**Subcommands:**

#### `ao store index`

Add artifacts to the search index.

```
ao store index <files...> [flags]
```

#### `ao store rebuild`

Rebuild the search index from scratch.

```
ao store rebuild [flags]
```

#### `ao store search`

Search for artifacts matching a query.

```
ao store search <query> [flags]
```

**Flags:**

```
  -h, --help        help for search
      --limit int   Maximum results to return (default 10)
```

#### `ao store stats`

Display statistics about the search index.

```
ao store stats [flags]
```

---

### `ao task-feedback`

Process task completion events and apply feedback to associated learnings.

```
ao task-feedback [flags]
```

**Flags:**

```
      --all              Process all tasks without feedback
  -h, --help             help for task-feedback
      --session string   Session ID to process
```

---

### `ao task-status`

Display the status of tracked tasks and their CASS maturity levels.

```
ao task-status [flags]
```

**Flags:**

```
  -h, --help             help for task-status
      --session string   Filter by session ID
```

---

### `ao task-sync`

Import and sync tasks from Claude Code's Task tool to CASS maturity tracking.

```
ao task-sync [flags]
```

**Flags:**

```
  -h, --help                help for task-sync
      --promote             Promote completed tasks to learnings
      --session string      Filter tasks by session ID
      --transcript string   Path to Claude Code transcript
```

---

### `ao temper`

The TEMPER phase validates and locks knowledge artifacts.

```
ao temper [command]
```

**Subcommands:**

#### `ao temper lock`

Lock artifacts that have passed validation.

```
ao temper lock <files...> [flags]
```

**Flags:**

```
      --force       Lock without validation check
  -h, --help        help for lock
      --recursive   Process directories recursively
```

#### `ao temper status`

Display status of artifacts in the TEMPER pipeline.

```
ao temper status [flags]
```

#### `ao temper validate`

Check that artifacts meet quality requirements for TEMPER.

```
ao temper validate <files...> [flags]
```

**Flags:**

```
  -h, --help                  help for validate
      --min-feedback int      Minimum feedback count (default 1)
      --min-maturity string   Minimum maturity level (provisional, candidate, established) (default "provisional")
      --min-utility float     Minimum utility threshold (default 0.5)
```

---

### `ao trace`

Trace the provenance of an artifact back to its source transcript.

```
ao trace <artifact-path> [flags]
```

**Flags:**

```
      --graph   Show ASCII provenance graph
  -h, --help    help for trace
```

---

### `ao version`

Display the version, build information, and runtime details.

```
ao version [flags]
```

---

